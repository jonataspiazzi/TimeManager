(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["PinBetterSaveCommon",12,53,"PinRepEditButtonCommon"],{"+c4W":function(e,t,n){var o=n("711d"),r=n("4/ic"),a=n("9ggG"),i=n("9Nap");e.exports=function(e){return a(e)?o(i(e)):r(e)}},"/QE7":function(e,t,n){n.d(t,"a",(function(){return i}));var o=n("q1tI"),r=n("z19Z"),a=n("EC67");function i(e){const{children:t,__dangerouslyDisableSpammyDomainCheck:n,externalData:i,href:s,isExternalLink:l=!1,onClick:c,onHistoryChange:d,target:u}=e,[h,p]=Object(o.useState)(null),[m,f]=Object(o.useState)(!1),g=Object(a.g)(),b=Object(a.h)();return Object(o.useEffect)(()=>(f(!0),()=>{f(!1)}),[]),Object(o.useEffect)(()=>{l&&!n&&null===h&&Object(r.a)({isMounted:m,pin:null==i?void 0:i.pin,location:b,spamCheckCallback:e=>p(e),href:s})},[e]),t({handleClick:({event:e})=>{Object(r.b)({isExternalLink:l,event:e})||(e.nativeEvent.preventDefault(),c&&c({event:e}),s&&(l?Object(r.c)({href:s,pinId:null==i?void 0:i.pinId,pin:null==i?void 0:i.pin,location:b,auxData:null==i?void 0:i.auxData,spamCheck:h}):Object(r.d)({event:e,onHistoryChange:d,href:s,history:g,target:"blank"===u?"blank":null})))}})}},"0YPa":function(e,t,n){var o=n("q1tI");t.a=(e,t)=>{const n=Object(o.useRef)(()=>{});Object(o.useEffect)(()=>{n.current=e},[e]),Object(o.useEffect)(()=>{if(null===t)return()=>{};const e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}},"0zyx":function(e,t,n){n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var o=n("mVx/"),r=n.n(o);const a=({pathname:e})=>/^\/pin\/[\w-]+\/?$/.test(e),i=e=>{const t=r()(e,e=>!a(e));return t&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t)?(({pathname:e,search:t})=>{const n=/^\/search\/pins\/(\?.*)$/.exec(e),o=(t||n&&n[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return o?decodeURIComponent(o[1]):""})(t):""}},"1LK5":function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},"1vym":function(e,t,n){},"3/Bf":function(e,t,n){n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g}));var o=n("7w6Q"),r=n("FZ8N"),a=n("LrH5");const i=Object(a.a)("logPwtStats");let s=null;const l=o.a.getSampleRate(.2);let c=!0;const d=e=>{s=e},u=e=>{s&&(s.historyAction=e)},h=e=>{s&&(s.initialAppLoadSurface=e)},p=(e,t)=>{if(!s)return void o.a.increment("performanceEntries.no_context",l,{name:e});const{deviceType:n,initialAppLoadSurface:a,isBot:i,isSocialBot:c}=s;if(!a)return void o.a.increment("performanceEntries.no_surface",l,{name:e});const d=`performanceEntries.${(c?"socialBot":i&&"bot")||"nonbot"}.${n}.${a}.${e}`;r.c||o.a.timing(d,t,l)},m=(e,t,n=!0)=>{if(!s)return i("pwt.metrics_quality.no_context"),void o.a.increment("pwt.metrics_quality.no_context",l,{eventName:e});const{browserName:a,browserVersion:c,deviceType:d,isBot:u,isSocialBot:h}=s,p=`pwt.${(h?"socialBot":u&&"bot")||"nonbot"}.metrics_quality.${d}.${e}`,m={...(null==t?void 0:t.tags)||{},browserName:a,browserVersion:(null==c?void 0:c.split(".")[0])||"0"},f=null==t?void 0:t.count;n&&(i(`${p}: ${"number"==typeof f?f:1}`),(null==t?void 0:t.tags)&&i(Object.entries(t.tags))),r.c||o.a.count(p,"number"==typeof f?f:1,l,m)},f=(e,t)=>m(`ERROR.${(null==t?void 0:t.action)?t.action+".":""}${e}`,{tags:t}),g=({appLoadName:e,clientNavName:t},n)=>{if(s){const o="APP_VOLUME.";c?(m(o.concat(e),{tags:{browserSupportsPwtProfiler:!!n}}),c=!1):"PUSH"===s.historyAction&&m(o.concat(t),{tags:{browserSupportsPwtProfiler:!!n}})}else o.a.increment("pwt.metrics_quality.no_context",l,{eventName:e.concat("."+t)})}},"4/ic":function(e,t,n){var o=n("ZWtO");e.exports=function(e){return function(t){return o(t,e)}}},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"7vSn":function(e,t,n){},"8Mj5":function(e,t,n){n.d(t,"a",(function(){return b}));var o=n("q1tI"),r=n.n(o),a=n("n6mq");function i({children:e}){return r.a.createElement(a.e,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 1px #fff"}},rounding:"circle"},e)}var s=n("Ye/N");function l({onClick:e,overlap:t,size:n}){return r.a.createElement(a.e,{marginStart:t},r.a.createElement(i,null,r.a.createElement(a.u,{accessibilityLabel:s.a._("Add","facePile.addButton","Accessibility label for button to add a collaborator"),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:e,size:n})))}function c({style:e}){return r.a.createElement(a.e,{bottom:!0,dangerouslySetInlineStyle:{__style:e||{}},left:!0,position:"absolute",right:!0,rounding:"pill",top:!0})}function d({children:e,hovered:t}){return r.a.createElement(a.e,{position:"relative"},r.a.createElement(c,{style:t?{zIndex:1,backgroundColor:"rgba(0,0,0,0.06)"}:null}),e)}function u({addButtonRef:e,hovered:t,overlap:n}){return r.a.createElement(a.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"addIcon"},r.a.createElement(a.e,{marginStart:n},r.a.createElement(d,{hovered:t},r.a.createElement(i,null,r.a.createElement(a.e,{alignItems:"center",color:"lightGray",display:"flex",height:48,justifyContent:"center",ref:e,rounding:"circle",width:48},r.a.createElement(a.t,{accessibilityLabel:s.a._("Add","ui.Facepile","Accessibility label on icon"),icon:"add",color:"darkGray",size:20}))))))}const h={xs:24,sm:32,md:40,lg:48,xl:56};function p({count:e,size:t}){const n=h[t];return r.a.createElement(i,null,r.a.createElement(a.e,{alignItems:"center",color:"lightGray",display:"flex",height:n,justifyContent:"center",position:"relative",rounding:"circle",width:n},r.a.createElement(a.V,{size:"lg",weight:"bold"},e>99?"99+":e)))}var m=n("7pfs"),f=n("FDmi");function g({isDim:e,name:t,size:n,src:o}){const i=h[n];return r.a.createElement(a.e,{color:"white",height:i,width:i,rounding:"circle"},r.a.createElement(a.e,{dangerouslySetInlineStyle:{__style:{opacity:e?.5:1}}},r.a.createElement(f.a,{name:t,outline:!0,src:o})))}function b({addButtonRef:e,additionalCount:t,faces:n,faceSize:o,onAddClick:i,onClick:s,oneClickTargetFacepile:c,overlap:h,pileRef:f,showAddButton:b}){const v=({apply:e,children:t})=>r.a.createElement(a.e,{marginStart:e?h:void 0},t);return r.a.createElement(m.a,null,({hovered:m,onMouseEnter:_,onMouseLeave:y})=>{const w=n.map(({isDim:e,key:t,name:n,src:a},i)=>r.a.createElement(v,{apply:0!==i,key:"face-"+i},r.a.createElement(d,{hovered:m&&!!s},r.a.createElement(g,{key:null!=t?t:n,isDim:e,name:n,size:o,src:a}))));t&&w.push(r.a.createElement(a.e,{dangerouslySetInlineStyle:{__style:{zIndex:1}},key:"additionalCount"},r.a.createElement(v,{apply:!0},r.a.createElement(d,{hovered:m&&!!s},r.a.createElement(p,{count:t,size:o}))))),c&&b&&w.push(r.a.createElement(u,{addButtonRef:e,hovered:m&&!!s,overlap:h}));const S=s?r.a.createElement(a.U,{ref:f,onTap:s,rounding:"pill"},r.a.createElement(a.e,{alignItems:"center",display:"flex"},w)):w;return r.a.createElement(a.e,{alignItems:"center",display:"flex",onMouseEnter:_,onMouseLeave:y},S,!c&&b&&i&&r.a.createElement(a.e,{dangerouslySetInlineStyle:{__style:{zIndex:2}},ref:e},r.a.createElement(l,{onClick:i,overlap:h,size:o})))})}},CMye:function(e,t,n){var o=n("GoyQ");e.exports=function(e){return e==e&&!o(e)}},EC51:function(e,t,n){var o=n("q1tI"),r=n.n(o),a=n("/QE7"),i=n("zwad"),s=n("n6mq");const l=Object(o.forwardRef)((e,t)=>{const{accessibilityLabel:n,children:o,__dangerouslyDisableSpammyDomainCheck:l,externalData:c,hoverStyle:d,href:u,id:h,inline:p,onBlur:m,onClick:f,onFocus:g,onHistoryChange:b,target:v}=e,_=i.a.isOffsiteUrl(u);return r.a.createElement(a.a,{__dangerouslyDisableSpammyDomainCheck:_?l:void 0,href:u,isExternalLink:_,externalData:_?c:void 0,onClick:f,onHistoryChange:_?void 0:b,target:_?void 0:v},({handleClick:e})=>r.a.createElement(s.z,{accessibilityLabel:n,hoverStyle:d,href:u,id:h,inline:p,onBlur:m,onClick:e,onFocus:g,ref:t,rel:_?"nofollow":void 0},o))});l.displayName="Link",t.a=l},EuRG:function(e,t,n){function o(e,t){return{type:"SEARCH_PIN_CLOSEUP_VIEWED",payload:{pinId:e,query:t}}}function r(e){return{type:"SEARCH_QUERY_STARTED",payload:{query:e}}}function a(e){return{type:"SEARCH_QUERY_INVALIDATED",payload:{query:e}}}n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}))},FZ8N:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}));const o=window.location.search.includes("debug_tracing"),r=window.location.search.includes("debug_lab_tracing"),a=o||r},GDhZ:function(e,t,n){var o=n("wF/u"),r=n("mwIZ"),a=n("hgQt"),i=n("9ggG"),s=n("CMye"),l=n("IOzZ"),c=n("9Nap");e.exports=function(e,t){return i(e)&&s(t)?l(c(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?a(n,e):o(t,i,3)}}},"H/Lk":function(e,t,n){n.d(t,"a",(function(){return o}));const o=(e,t,n)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:n}})},HMdf:function(e,t,n){n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return f}));var o=n("vzKb"),r=n("SyXB");function a(e){var t,n;return(null===(t=window)||void 0===t||null===(n=t.performance)||void 0===n?void 0:n.getEntriesByType)&&window.performance.getEntriesByType(e)||[]}var i=n("FZ8N"),s=n("3/Bf");let l;function c(){window.performance&&window.performance.clearResourceTimings&&(Object(r.c)("resourceBufferCleared"),i.b&&console.info("Warning: Clearing resource timings in default buffer."),Object(s.c)("resourceBufferSize",{count:a("resource").length}),window.performance.clearResourceTimings())}const d=({size:e})=>{if(window.performance){window.PerformanceObserver?(l=a("resource"),Object(o.a)({entryTypes:["resource"]},t=>{l=(l||[]).concat(t.getEntries()),l.length>e&&(l=l.slice(-e))})):(window.addEventListener("popstate",()=>{a("resource").length>e&&c()}),window.performance.setResourceTimingBufferSize&&window.performance.setResourceTimingBufferSize(e));try{window.performance.onresourcetimingbufferfull=()=>{l||c()}}catch(t){}}},u=()=>l||a("resource"),h=()=>{l&&(Object(s.c)("customBufferSize",{count:l.length}),l=[]),c()},p=()=>({customBufferSize:l?l.length:0,defaultBufferSize:a("resource").length}),m=(e,t=!0)=>{let n=0,o=0;const r=(a=e.filter(e=>t?(e.responseEnd||"img"!==e.initiatorType||(n+=1),e.transferSize||"img"!==e.initiatorType||(o+=1),!!e.responseEnd&&!!e.transferSize&&"img"===e.initiatorType):!!e.responseEnd&&!!e.transferSize).map(e=>8*(e.transferSize||0)/((e.responseEnd-e.responseStart)/1e3)/1e3)).length?a.reduce((e,t)=>e+t,0)/a.length:null;var a;return t&&(n>0&&Object(s.c)("images.downloadSpeed.noResponseEnd",{tags:{count:n}},!1),o>0&&Object(s.c)("images.downloadSpeed.transferSize",{tags:{count:o}},!1)),r},f=()=>(e=>{if(!e)return"unknown";const t=Math.floor(e/1e3);return t<1?"0-1":t<5?"1-5":t<10?"5-10":t<20?"10-20":t<40?"20-40":t<80?"40-80":"80_or_above"})(m(u()))},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},IWTy:function(e,t,n){var o=n("yue5");e.exports=function(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,s=a.length,l=n.length;++r<s;){var c=o(a[r],i[r]);if(c)return r>=l?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}},JELi:function(e,t,n){var o=n("KwMD"),r=n("ut/Y"),a=n("Sxd8"),i=Math.max,s=Math.min;e.exports=function(e,t,n){var l=null==e?0:e.length;if(!l)return-1;var c=l-1;return void 0!==n&&(c=a(n),c=n<0?i(l+c,0):s(c,l-1)),o(e,r(t,3),c,!0)}},KwMD:function(e,t){e.exports=function(e,t,n,o){for(var r=e.length,a=n+(o?1:-1);o?a--:++a<r;)if(t(e[a],a,e))return a;return-1}},LrH5:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n("FZ8N");const r=(e,t)=>{o.b&&e instanceof HTMLImageElement&&(e.style.outline="10px solid "+t,e.style.outlineOffset="-30px")},a=e=>(t,...n)=>{o.b&&console.log("string"==typeof t?`[PWT:${e}] ${t}`:t,...n)}},O7RO:function(e,t,n){var o=n("CMye"),r=n("7GkX");e.exports=function(e){for(var t=r(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,o(i)]}return t}},QKYm:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return d}));const o=3,r={square:{width:236,height:236},wide:{width:300,height:200},xWide:{width:358,height:200},xxWide:{width:376,height:200}},a={square:{width:236,height:176},wide:{width:300,height:135},xWide:{width:358,height:200},xxWide:{width:376,height:200}},i={square:{width:236,height:157},wide:{width:320,height:213}};function s(e,t){return t?a[e].width:r[e].width}function l(e,t){return t?a[e].height:r[e].height}function c(e){return i["square"===e?"square":"wide"]}function d(e){return"list"===e?"100%":c(e).width+16}},Sxd8:function(e,t,n){var o=n("ZCgT");e.exports=function(e){var t=o(e),n=t%1;return t==t?n?t-n:t:0}},SyXB:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return d}));var o=n("XtwW");const r="masonryPagination";let a={};const i=e=>"📌 "+e,s=()=>{const e={};return Object.keys(a).forEach(t=>{(a[t]||[]).slice(0,3).forEach((n,o)=>{e[o?`${t}_${o+1}`:t]=n})}),e},l=(e,t)=>(a[e]||[]).filter(e=>e<t).length,c=(e,t)=>l(e,t)>0,d=()=>{o.a&&Object.keys(a).forEach(e=>((e,t)=>{const n=i(t);e.clearMarks(n),e.clearMeasures(n)})(o.a,e)),a={}};t.c=e=>{o.a&&(a[e]=(a[e]||[]).concat([o.a.now()]),((e,t)=>{const n=i(t);e.mark(n),e.measure(n)})(o.a,e))}},WnNx:function(e,t,n){function o(e){return{type:"SHOW_REPIN_ANIMATION",payload:{pinId:e}}}function r(){return{type:"HIDE_REPIN_ANIMATION"}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}))},XKAG:function(e,t,n){var o=n("ut/Y"),r=n("MMmD"),a=n("7GkX");e.exports=function(e){return function(t,n,i){var s=Object(t);if(!r(t)){var l=o(n,3);t=a(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,i);return c>-1?s[l?t[c]:c]:void 0}}},XtwW:function(e,t,n){var o;t.a=(o=window.performance)&&o.clearMarks&&o.clearMeasures&&o.clearResourceTimings&&o.getEntries&&o.getEntriesByName&&o.getEntriesByType&&o.mark&&o.measure&&o.now&&o.setResourceTimingBufferSize?o:null},ZCgT:function(e,t,n){var o=n("tLB3"),r=1/0;e.exports=function(e){return e?(e=o(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},ZCpW:function(e,t,n){var o=n("lm/5"),r=n("O7RO"),a=n("IOzZ");e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}},ZdPf:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return i}));const o={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},r={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function a(e){return null!=e&&(!!e.notice||!!e.notices&&e.notices.length>0)}function i(e){return!!e&&e.severity===r.ABUSIVE}},a49R:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),r=n.n(o),a=(n("17x9"),n("n6mq"));function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=r.a.createContext(()=>{});class l extends o.Component{constructor(...e){super(...e),i(this,"state",{flyout:void 0,showOnTopOfModal:!1}),i(this,"setActive",(e,t,n=!1)=>{if(e){const e={...t,onDismiss:()=>{t&&t.onDismiss&&(t.onDismiss(),this.setState({flyout:void 0}))},positionRelativeToAnchor:!1};this.setState({flyout:{props:e},showOnTopOfModal:n})}else this.setState({flyout:void 0})})}render(){var e,t,n,o,i,l,c,d,u;const{flyout:h,showOnTopOfModal:p}=this.state,{children:m}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.Provider,{value:this.setActive},m),h&&r.a.createElement("div",p?{style:{zIndex:752,position:"absolute",top:0}}:{},r.a.createElement(a.q,{anchor:null===(e=h.props)||void 0===e?void 0:e.anchor,onDismiss:null===(t=h.props)||void 0===t?void 0:t.onDismiss,color:null===(n=h.props)||void 0===n?void 0:n.color,idealDirection:null===(o=h.props)||void 0===o?void 0:o.idealDirection,positionRelativeToAnchor:null===(i=h.props)||void 0===i?void 0:i.positionRelativeToAnchor,shouldFocus:null===(l=h.props)||void 0===l?void 0:l.shouldFocus,showCaret:null===(c=h.props)||void 0===c?void 0:c.showCaret,size:null===(d=h.props)||void 0===d?void 0:d.size},null===(u=h.props)||void 0===u?void 0:u.children)))}}t.b=l},alwl:function(e,t,n){var o=n("eUgh"),r=n("ZWtO"),a=n("ut/Y"),i=n("l9OW"),s=n("1LK5"),l=n("sEf8"),c=n("IWTy"),d=n("zZ0H"),u=n("Z0cm");e.exports=function(e,t,n){t=t.length?o(t,(function(e){return u(e)?function(t){return r(t,1===e.length?e[0]:e)}:e})):[d];var h=-1;t=o(t,l(a));var p=i(e,(function(e,n,r){return{criteria:o(t,(function(t){return t(e)})),index:++h,value:e}}));return s(p,(function(e,t){return c(e,t,n)}))}},bNC6:function(e,t,n){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));const o={id:14,name:"own_profile"},r={id:15,name:"other_profile"},a={initial_app_load:{unauth:{board:{id:114,name:"board_page_interactive"},pin_closeup:{id:113,name:"pin_page_interactive"},other_profile:{id:115,name:"user_page_interactive"},topic:{id:119,name:"topic_page_interactive"},sterling_signup:{id:201,name:"sterling_signup_main_pageload"},sterling_login:{id:202,name:"sterling_login_main_pageload"}},auth:{bizhub:{id:607,name:"bizhub_pinteractive"},homefeed:{id:19,name:"home_feed_pinteractive"},sterling_reporting_details:{id:218,name:"sterling_reporting_details_pageload"},sterling_reporting_overview:{id:219,name:"sterling_reporting_overview_pageload"},sterling_ads_create:{id:221,name:"sterling_adscreate_main_pageload"},sterling_ads_duplicate:{id:206,name:"sterling_adsduplication_main_pageload"},sterling_ads_edit:{id:204,name:"sterling_adsedit_main_pageload"},sterling_billing_profile:{id:203,name:"sterling_billingprofile_main_pageload"},sterling_bulk_editor:{id:205,name:"sterling_bulkeditor_main_pageload"},sterling_pin_builder:{id:222,name:"sterling_adscreate_pinbuilder_pageload"}}},client_route_push:{unauth:{},auth:{bizhub:{id:608,name:"bizhub_page_render"},homefeed:{id:2,name:"home_feed_render"},search:{id:3,name:"search_feed_render"},pin_closeup:{id:13,name:"pin_closeup_details"},own_profile:o,other_profile:r}},client_route_replace:{unauth:{},auth:{own_profile:o,other_profile:r}}},i={client_route_push:{auth:{pin_closeup:{story_pin:{id:700,name:"story_pin_closeup"}}}}},s={board_picker:16,grid_bottom_spinner:12,facebook_autologin:500,google_autologin:501,story_pin_step:701},l=e=>{var t,n;const{navigationType:o,isAuthenticated:r,segment:s,surface:l}=e,c=r?"auth":"unauth",d=null===(t=i[o])||void 0===t||null===(n=t[c])||void 0===n?void 0:n[l];return s&&d&&d[s]||a[o][c][l]},c=e=>{if("stopwatch"===e.type)return s[e.name]||null;const t=l(e);return t?t.id:null},d=e=>{if("stopwatch"===e.type)return e.name;const{navigationType:t,isAuthenticated:n,segment:o,surface:r}=e,a=n?"auth":"unauth",i=l(e);return i?i.name:`${t}_${a}_${r}${o?"_"+o:""}`}},bZU8:function(e,t,n){n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const o="pwt-grid-item",r=['div[data-grid-item="true"]',"div.Masonry div.Collection-Item","div.Grid__Item",`div[data-test-id="${o}"]`],a=r.join(","),i=r.map(e=>e+" img").join(","),s=r.map(e=>e+" div[style*=background-image]").join(",")},e0nq:function(e,t,n){function o(e){return{type:"PIN_BETTER_SAVE",payload:e}}function r(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function a(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function i(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}))},e3KR:function(e,t,n){n.d(t,"c",(function(){return V})),n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return $}));var o=n("q1tI"),r=n.n(o),a=n("/MKj"),i=(n("7vSn"),n("8cMa")),s=n("s7xj"),l=n("n6mq");const c=({collaborator_count:e,isInWebRepinFlowExp:t,type:n})=>t?r.a.createElement(l.e,{marginEnd:e?2:0},r.a.createElement(i.a,{type:n})):r.a.createElement(i.a,{type:n});var d=({board:e,showCollaborativeIcon:t,showPrivateIcon:n,showProtectedIcon:o,showSectionsIcon:a,isInWebRepinFlowExp:d})=>{var u;const h=(null==e||null===(u=e.collaborating_users)||void 0===u?void 0:u.length)||0;return t||n||o||a?r.a.createElement(l.e,{display:"flex",direction:"row",marginEnd:d?0:5,dangerouslySetInlineStyle:{__style:{paddingLeft:8}},alignItems:"center"},n&&r.a.createElement(c,{collaborator_count:h,isInWebRepinFlowExp:d,type:"secret"}),o&&r.a.createElement(c,{collaborator_count:h,isInWebRepinFlowExp:d,type:"protected"}),t&&(d?r.a.createElement(s.a,{board:e,isCompact:!0,ownerOnly:!1}):r.a.createElement(i.a,{type:"group"})),a&&r.a.createElement(i.a,{type:"sections"})):null},u=n("JW66"),h=n("Ye/N"),p=n("4cpq");function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends o.Component{constructor(...e){super(...e),m(this,"state",{hovered:!1}),m(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),m(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),m(this,"handleTouch",()=>{const{board:e,onClick:t}=this.props;t(e)}),m(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),m(this,"tapAreaRef",Object(o.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){const{hovered:e}=this.state,{board:t,buttonText:n,isSectionOpen:o,shouldOpenSections:a,showFlyoutSaveButton:i,isInWebRepinFlowExp:s}=this.props,c=!!t.section_count&&t.section_count>0,m=c?"boardWithSection":"boardWithoutSection",f=t.image_cover_url;return r.a.createElement(p.a,{id:m},r.a.createElement(l.U,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef},r.a.createElement(l.e,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:s?64:52,marginStart:s?2:3,marginEnd:s?2:3,marginBottom:s?0:1,marginTop:s?0:1,padding:s?2:0,rounding:3},r.a.createElement(l.e,{flex:"none",marginBottom:s?0:1,marginStart:s?0:2,marginEnd:s?2:3,marginTop:s?0:1,overflow:"hidden",width:s?48:36,height:s?48:36,rounding:2},f&&!a&&r.a.createElement(l.A,{wash:!0,width:s?48:36,height:s?48:36},r.a.createElement(l.v,{src:f,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})),f&&a?r.a.createElement(l.A,{wash:!0,width:s?48:36,height:s?48:36},r.a.createElement(l.v,{src:f,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})):r.a.createElement(l.e,{color:a?"lightGray":"transparent",width:"100%",height:"100%"})),r.a.createElement(l.e,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:s?0:1},r.a.createElement(l.V,{truncate:!0,weight:a||!a?"bold":"normal"},t.name)),t&&(!e||e&&c&&!o)?r.a.createElement(l.e,null,r.a.createElement(d,{board:t,isOpen:t.isOpen,showCollaborativeIcon:!!t.is_collaborative,showPrivateIcon:t.privacy===u.a.BoardPrivacy.SECRET,showProtectedIcon:t.privacy===u.a.BoardPrivacy.PROTECTED,showSectionsIcon:c&&a,isInWebRepinFlowExp:s})):null,e&&(0===t.section_count||!a)&&i&&r.a.createElement(l.e,{marginEnd:s?0:2,flex:"none"},r.a.createElement(l.f,{accessibilityLabel:"save button",color:"red",inline:!0,onClick:this.handleButtonClick,text:n||h.a._("Save","save button","save button")})))))}}m(f,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});var g=({image_url:e,naturalHeight:t,naturalWidth:n})=>r.a.createElement(l.e,{marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,height:48,rounding:2},r.a.createElement(l.A,{wash:!0,width:48,height:48},r.a.createElement(l.v,{src:e,alt:"",naturalHeight:t,naturalWidth:n})));function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends o.Component{constructor(...e){super(...e),b(this,"state",{hovered:!1}),b(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),b(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),b(this,"handleTouch",()=>{const{board:e,onClick:t,section:n}=this.props;t(n,e)}),b(this,"handleButtonClick",({event:e})=>{const{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),b(this,"tapAreaRef",Object(o.createRef)())}focus(){const e=this.tapAreaRef.current;e&&e.focus()}render(){var e;const{hovered:t}=this.state,{buttonText:n,section:o,showSectionSaveButton:a,isInWebRepinFlowExp:i}=this.props;return r.a.createElement(l.U,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef},r.a.createElement(l.e,{color:t?"lightGray":"white",display:"flex",alignItems:"center",height:i?64:52,marginStart:i?2:0,marginEnd:i?2:0,padding:i?2:0,marginTop:i?0:1,rounding:3,dangerouslySetInlineStyle:{__style:i?{}:{marginLeft:53,marginRight:11}}},i&&!!(null===(e=o.preview_pins)||void 0===e?void 0:e.length)&&r.a.createElement(g,{image_url:o.preview_pins[0].image_square_url,naturalHeight:o.preview_pins[0].image_square_size_pixels.height,naturalWidth:o.preview_pins[0].image_square_size_pixels.width}),r.a.createElement(l.e,{flex:"grow",paddingY:1,marginStart:i?0:4},r.a.createElement(l.V,{truncate:!0,weight:i?"bold":"normal"},o.title)),t&&a&&r.a.createElement(l.e,{marginEnd:i?0:2,flex:"none"},r.a.createElement(l.f,{accessibilityLabel:"save button",color:"red",inline:!0,text:n||h.a._("Save","save button","save button"),onClick:this.handleButtonClick}))))}}b(v,"defaultProps",{showSectionSaveButton:!0});var _=n("w70y");var y=Object(_.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id}),allowStale:!1})(e=>{const{board:t,buttonText:n,sectionsResource:o,onClick:a,onButtonClick:i,showSectionSaveButton:s,isInWebRepinFlowExp:c}=e,d=o&&o.data||[];return r.a.createElement(l.e,null,!o.isLoaded&&r.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},r.a.createElement(l.O,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})),o.isLoaded&&r.a.createElement(l.e,null,c&&r.a.createElement(l.e,{marginStart:4,marginTop:2,paddingY:1},r.a.createElement(l.V,{size:"sm"},h.a._("Section","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title"))),d.map(e=>r.a.createElement(v,{board:t,buttonText:n,key:e.id,onButtonClick:i,onClick:a,section:e,showSectionSaveButton:s,isInWebRepinFlowExp:c}))))});function w({isBoardCreate:e,onCreateBoardClick:t,isInWebRepinFlowExp:n}){const[a,i]=Object(o.useState)(!1);return r.a.createElement(l.e,{"data-test-id":"create-board",height:"100%",display:"flex"},r.a.createElement(l.U,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTap:t,rounding:2},r.a.createElement(l.e,{display:"flex",alignItems:"center",padding:n?4:2,color:a?"lightGray":"white",width:"100%",height:"100%"},r.a.createElement(l.e,{rounding:n?2:0,dangerouslySetInlineStyle:{__style:n?{padding:"14px"}:{}},marginStart:n?0:4,marginEnd:n?2:5,color:n?"lightGray":"transparent"},r.a.createElement(l.t,{accessibilityLabel:"Add a board",size:n?20:28,icon:n?"add":"add-circle",color:n?"darkGray":"red"})),e?r.a.createElement(l.V,{align:"center",truncate:!0,weight:"bold"},h.a._("Create board")):r.a.createElement(l.V,{align:"center",truncate:!0,weight:"bold"},h.a._("Create section")))))}function S(e){const{accessibilityLabel:t,focused:n,id:a,onBlur:i,onChange:s,onFocus:c,placeholder:d,value:u}=e,h=Object(o.useRef)(null);return Object(o.useEffect)(()=>{if(n){const e=h.current;window.requestAnimationFrame(()=>{const t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[n]),r.a.createElement(l.e,{ref:h},r.a.createElement(l.K,{accessibilityLabel:t,id:a,onBlur:i,onChange:s,onFocus:c,placeholder:d,size:"lg",value:u}))}var E=n("eOdZ"),B=n("3DIk");function C({onClick:e,title:t,showIcon:n}){const[a,i]=Object(o.useState)(!1);return r.a.createElement(l.U,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTap:()=>{e({title:t})}},r.a.createElement(l.e,{color:a?"lightGray":"white",display:"flex",alignItems:"center",height:n?64:52,marginStart:3,marginEnd:3,marginBottom:1,rounding:3},r.a.createElement(l.e,{flex:"none",marginBottom:1,marginStart:n?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:n?48:36,height:n?48:36,rounding:n?2:1},r.a.createElement(l.e,{color:"lightGray",width:"100%",height:"100%",display:n?"flex":void 0,alignItems:n?"center":void 0,justifyContent:n?"center":void 0},n&&r.a.createElement(l.t,{icon:"add",color:"darkGray",size:20,accessibilityLabel:h.a._("Create board icon","BoardSuggestionRow.AccessibilityLabel.Text","accessibility label text form add icon")}))),r.a.createElement(l.e,{flex:"grow",paddingY:1},r.a.createElement(l.V,{truncate:!0,weight:"bold"},t)),a&&r.a.createElement(l.e,{marginEnd:2},r.a.createElement(l.f,{accessibilityLabel:"create button",color:"red",inline:!0,text:h.a._("Create","create button to create a new board","create button to create a new board")}))))}const I=e=>{const{suggestionsResource:t,onClick:n,pinBuilderSuggestions:o,inWebRepinFlowExp:a}=e,i=o||t&&t.data||[],s=r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(l.e,{marginStart:4,marginTop:2,paddingY:1},r.a.createElement(l.V,{size:"sm"},h.a._("Suggestions","PinBetterSave.BoardFlyout.SectionPlaceholderText","section list title"))),i.map((e,t)=>r.a.createElement(C,{key:t,title:e.title,onClick:n,showIcon:a})));return r.a.createElement(r.a.Fragment,null,i?s:r.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},r.a.createElement(l.O,{accessibilityLabel:h.a._("loading board suggestions","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})))};var x=n("0BOE"),O=n("eUcp"),R=n("Wer7"),k=n("qyR9"),T=n("r8eU"),D=n("U4JR"),j=n("QAzJ"),P=n("seP0"),L=n("pLLR"),A=n("ANjH");function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const F=e=>"enabled_no_searchbar"===e?354:290,N=e=>e?498:439,H=360,z=e=>e?80:52;class W extends o.PureComponent{constructor(...e){var t;super(...e),t=this,M(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),M(this,"getItems",e=>{const{boardResource:t,suggestedBoardsShortListResource:n,displayShortlistMostRecentBoard:o}=this.props;if(!t||!t.data)return[];const{all_boards:r,boards_shortlist:a}=t&&t.data,i=r.filter(e=>!this.props.advertiser_id||"secret"!==e.privacy).map(e=>this.mapBoards(e,"allBoards",0)),s=o?a.map((e,t)=>this.mapBoards(e,"shortlist",t+1)):(n&&n.data||[]).map((e,t)=>this.mapBoards(e,"shortlist",t+1)),{searchQuery:l}=this.state;return l.length>=k.a?[...Object(x.a)(i,l)]:[...r.length>3&&s&&s.length?[{type:"header",title:e?h.a._("Top choices","PinBetterSave.BoardFlyout.TopChoicesSectionTitle","Header for top suggestions in board picker"):h.a._("Top board suggestions","Header for top suggesions in board picker","Header for top suggesions in board picker")},...s]:[],{type:"header",title:h.a._("All boards","Header for all boards in board picker","Header for all boards in board picker")},...i,...i.length<=3?[{type:"header",title:h.a._("Suggested board names","Header for suggested boards in board picker","Header for suggested boards in board picker")}]:[]]}),M(this,"mapBoards",(e,t,n)=>{const{setBoardWithSection:o}=this.props,{selectedBoardId:r,selectedBoardCategory:a}=this.state,i=e.id===r&&t===a;return i&&o&&o(e),{...e,category:t,isOpen:i,gridIndex:n}}),M(this,"handleBack",()=>{const{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),M(this,"handleSectionClick",(e,t)=>{const{onItemChosen:n}=this.props;Object(D.b)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),n({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",imageCoverUrl:t.image_cover_url})}),M(this,"getPinBuilderSuggestions",(async function(){const{pin:e}=t.props;if(e){var n;const o=E.a.create("BoardTitleSuggestionsResource",{pin_id:e.id}),r=await o.callGet({showError:!1},{retries:1});if(null===(n=r.resource_response)||void 0===n?void 0:n.data){const e=r.resource_response.data.map(e=>({title:e.title}))||[];t.setState({boardSuggestions:e})}}})),M(this,"handleBoardWithSectionsClick",e=>{const{selectedBoardId:t,selectedBoardCategory:n}=this.state,o=t===e.id&&n===e.category;this.setState({isSectionOpen:!0,selectedBoardId:o?"":e.id,selectedBoardCategory:o?"":e.category})}),M(this,"handleBoardClick",({board:e,toggleSections:t})=>{const{onItemChosen:n}=this.props;this.setState({searchBoxFocused:!1}),t?this.handleBoardWithSectionsClick({id:e.id,category:e.category}):(Object(D.b)(101,{component:13282,element:36,objectId:e.id,view:91,grid_index:e.gridIndex}),n({boardId:e.id,url:e.url,title:e.name||"",imageCoverUrl:e.image_cover_url}))}),M(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),M(this,"boardSectionsHeaderRef",Object(o.createRef)())}componentDidMount(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}componentDidUpdate(e,t){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd(),this.state.isSectionOpen&&!t.isSectionOpen&&this.boardSectionsHeaderRef.current&&this.boardSectionsHeaderRef.current.focus()}setPWTLoadingEnd(){const{boardResource:e,boardPickerStopwatch:t}=this.props;t&&(!e||e.error?t.error():t.stop())}render(){const{boardResource:e,buttonText:t,customItem:n,onBoardCreate:o,onButtonClick:a,paneWidth:i,showCreateBoardButton:s,showFlyoutSaveButton:c,showSections:d,showSectionSaveButton:u,suggestedBoardsShortListResource:m,useStoryboardStyle:g,requestContext:b,webRepinExpGroup:v,ignoreWebRepinExp:_}=this.props,{boardSuggestions:E,isSectionOpen:B,searchBoxFocused:C,searchQuery:x}=this.state,R=!_&&new T.b(b,"web_repin_flow").enabled(),k=_?"":v;if(!e)return null;const{isLoaded:D,error:j}=e;let P=[];(D&&!j||m&&m.data&&!m.error)&&(P=this.getItems(R));const L=P.filter(e=>e&&"allBoards"===e.category).length;L<=3&&0===E.length&&this.getPinBuilderSuggestions();const A=g?200:322,M=g?214:334,W=null===B?"":"BoardsSlideRight",U=e=>r.a.createElement(r.a.Fragment,null,!R&&r.a.createElement(l.o,null),r.a.createElement(l.e,{overflow:"hidden",height:z(R),borderStyle:R&&L>=3&&P.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},r.a.createElement(w,{onCreateBoardClick:()=>o({title:this.state.searchQuery}),isBoardCreate:e,isInWebRepinFlowExp:R})));return r.a.createElement(l.e,{width:"100%",rounding:2,overflow:"hidden",height:g?"100%":N(R),color:"white",zIndex:O.a},D?null:r.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:R?H:i,height:"100%",minHeight:200},r.a.createElement(l.O,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0})),r.a.createElement(l.e,{display:"flex",direction:"row"},D&&r.a.createElement("div",{className:B?"BoardsSlideLeft":W},r.a.createElement(l.e,{position:"relative"},r.a.createElement(l.e,{display:"flex",direction:"row",width:R?720:2*i,zIndex:new l.p(0)},r.a.createElement(l.e,{display:"flex",direction:"column",width:R?H:i},R&&r.a.createElement(l.e,{height:64,display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(l.V,{align:"center",size:"lg",weight:"bold"},h.a._("Save to board","PinBetterSave.BoardFlyout.SaveToBoardPlaceholder","flyout header text"))),"enabled_no_searchbar"!==k&&r.a.createElement(l.e,{padding:R?0:3,paddingX:R?4:3,height:R?64:"auto"},r.a.createElement(S,{accessibilityLabel:h.a._("Search through your boards","search bar placeholder text","search bar placeholder text"),focused:C,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:h.a._("Search","search bar placeholder text","search bar placeholder text"),value:x})),r.a.createElement(l.e,{minHeight:R?F(k):A,maxHeight:R?F(k):A,overflow:"scrollY"},m&&!m.isLoaded?r.a.createElement(p.a,{id:"suggestedBoardsContainer"},r.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:128.5},r.a.createElement(l.O,{accessibilityLabel:h.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!0}))):null,n,P.map((e,n)=>"header"===e.type?r.a.createElement(l.e,{key:e.title,paddingX:R?4:3,paddingY:1,marginTop:n>0?2:1},r.a.createElement(l.V,{size:R?"sm":"md"},e.title)):r.a.createElement(l.e,{key:`${e.category}-${e.id}`},r.a.createElement(f,{board:e,buttonText:t,onClick:e=>{this.handleBoardClick({board:e,toggleSections:d&&!!e.section_count})},onButtonClick:a,shouldOpenSections:d,showFlyoutSaveButton:c,isInWebRepinFlowExp:R}))),L<=3&&r.a.createElement(I,{onClick:o,pinBuilderSuggestions:E,inWebRepinFlowExp:R})),s&&U(!0)),r.a.createElement(l.e,{display:"flex",direction:"column",width:R?H:i,marginBottom:R?2:0},r.a.createElement(l.e,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},r.a.createElement(l.l,{span:2},r.a.createElement(l.e,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3},r.a.createElement(l.u,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"}))),r.a.createElement(l.l,{span:8},r.a.createElement(l.e,{display:"flex",justifyContent:"center",alignItems:"center",height:R?64:52},r.a.createElement(l.V,{weight:"bold"},R?h.a._("Save Pin to","PinBetterSave.BoardFlyout.SectionHeader","Header for section header"):h.a._("Choose section","Header for section header","Header for section header")))),r.a.createElement(l.l,{span:2},r.a.createElement(l.e,null))),!R&&r.a.createElement(l.o,null),r.a.createElement(l.e,{minHeight:R?354:M,maxHeight:R?354:M,overflow:"scrollY"},P?r.a.createElement(r.a.Fragment,null,P&&P.map(e=>"header"===e.type?null:r.a.createElement(l.e,{key:`${e.category}-${e.id}`},e.isOpen&&r.a.createElement(r.a.Fragment,null,R&&r.a.createElement(l.e,{marginStart:4,marginTop:2,paddingY:1},r.a.createElement(l.V,{size:"sm"},h.a._("Board","PinBetterSave.BoardFlyout.BoardPickerTitle","board title on section picker"))),r.a.createElement(f,{board:e,buttonText:t,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:a,shouldOpenSections:!1,showFlyoutSaveButton:c,ref:this.boardSectionsHeaderRef,isInWebRepinFlowExp:R}),r.a.createElement(y,{board:e,buttonText:t,onClick:this.handleSectionClick,onButtonClick:a,showSectionSaveButton:u,isInWebRepinFlowExp:R}))))):null),s&&U(!1)))))))}}function U(e){const t=Object(P.c)(),{group:n}=Object(j.a)("web_repin_flow");return r.a.createElement(W,Object.assign({},e,{boardPickerStopwatch:t,webRepinExpGroup:n}))}function q(e){const{advertiser:t,viewer:n}=e;if(n&&t){var o;const t=e.advertiser;if(n.isAuth&&(null===(o=t.admin_mode_info)||void 0===o?void 0:o.version)===B.a)return{hasMUA:!1,advertiser_id:t.id,username:t.owner_user_id};if(n.isAuth&&t.owner_user_id!==n.id)return{hasMUA:!0,advertiser_id:t.id,username:t.owner_user_id};if(n.isAuth&&t.owner_user_id===n.id)return{hasMUA:!1,advertiser_id:t.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,username:void 0}}function G(e){const{advertiser_id:t,hasMUA:n,username:o}=e;return{field_set_key:"board_picker",filter:n?"protected":"all",...o?{username:o}:{},...t?{advertiser_id:t}:{}}}function V(){return(e,t)=>e(Object(R.f)("BoardPickerBoardsResource",G(q(t()))))}M(W,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0});const Y=Object(A.compose)(Object(a.connect)((function(e){return q(e)})),L.e,Object(_.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:G}))(U),$=Object(A.compose)(L.e,Object(_.b)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:e=>({pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3})}))(U)},eUcp:function(e,t,n){n.d(t,"i",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"j",(function(){return u})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"l",(function(){return f}));var o=n("n6mq");const r=new o.p(0),a=new o.p(1),i=2,s=new o.p(i),l=2,c=new o.p(l),d=new o.p(3),u=new o.p(1),h=new o.p(3),p=3,m=4,f=(new o.p(m),new o.p(100))},fEA9:function(e,t,n){n.r(t),n.d(t,"PinBetterSave",(function(){return K}));var o=n("q1tI"),r=n.n(o),a=n("/MKj"),i=n("qWlA"),s=(n("1vym"),n("TSYQ")),l=n.n(s),c=n("Ye/N"),d=n("pLLR"),u=n("n6mq");function h(e){const{dropdownClasses:t,dropdownRef:n,onBoardDropdownClick:a,onSaveClick:i,renderPinSaveTooltip:s,saveButtonClasses:d,saveButtonRef:h,showSaveButton:p,textColor:m,title:f,hideDropdown:g}=e;return g?r.a.createElement(u.e,{alignItems:"center",justifyContent:"end",display:"flex",width:"100%",height:44},r.a.createElement(o.Fragment,null,r.a.createElement("button",{className:d,onClick:a,"data-test-id":"PinBetterSaveButton",ref:n},r.a.createElement(u.V,{color:"white",size:"sm",weight:"bold"},c.a._("Save","BetterSave.Save.HideDropdown.label","BetterSave Save label"))),!!s&&!!h.current&&s(h.current))):r.a.createElement(u.e,{alignItems:"center",display:"flex",width:"100%",height:44},r.a.createElement("button",{className:t,"data-test-id":"PinBetterSaveDropdown",onClick:a,ref:n},r.a.createElement(u.e,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},r.a.createElement(u.e,{flex:"grow",overflow:"hidden"},r.a.createElement(u.V,{color:m,truncate:!0,size:"sm"},r.a.createElement("span",{className:l()("PinBetterSave__DropdownText","PinBetterSave__DropdownText--lego")},f))),r.a.createElement(u.e,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},r.a.createElement("div",{className:l()("PinBetterSave__DownArrowContainer","PinBetterSave__DownArrowContainer--lego")},r.a.createElement(u.t,{accessibilityLabel:c.a._("Select a board you want to save to","BetterSave accessibility label to change the board","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),p&&r.a.createElement(o.Fragment,null,r.a.createElement("button",{className:d,onClick:i,"data-test-id":"PinBetterSaveButton",ref:h},r.a.createElement(u.V,{color:"white",size:"sm",weight:"bold"},c.a._("Save","BetterSave Save label","BetterSave Save label"))),!!s&&!!h.current&&s(h.current)))}function p(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:o,renderPinSaveTooltip:a,saveButtonRef:i,showSaveButton:s,title:l}=e;return r.a.createElement(u.e,{alignItems:"center",display:"flex",width:"100%"},r.a.createElement(u.e,{flex:"grow",overflow:"hidden",width:"100%"},r.a.createElement(u.U,{onTap:({event:e})=>n(e),ref:t},r.a.createElement(u.e,{alignItems:"center",display:"flex",flex:"grow",paddingX:4},r.a.createElement(u.e,{flex:"grow"},r.a.createElement(u.V,{color:"darkGray",size:"lg",truncate:!0,weight:"bold"},l)),r.a.createElement(u.e,{marginStart:2,flex:"none","data-test-id":"boardSelectionDropdown"},r.a.createElement(u.t,{accessibilityLabel:c.a._("Select a board you want to save to","PinBetterSave.BoardSelection.DropdownIcon","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),s&&r.a.createElement(u.e,{flex:"none"},r.a.createElement(u.f,{color:"red",inline:!0,onClick:({event:e})=>{o(e)},ref:i,size:"lg",text:c.a._("Save","PinBetterSave.BoardSelection.SaveButton","BetterSave Save label")})),!!a&&!!i.current&&a(i.current))}function m(e){const{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:i,selectedTitle:s,showSaveButton:c,unselectedText:u,variant:m,view:f,hideDropdown:g}=e,{isRTL:b}=Object(d.d)(),v=Object(o.useRef)(),_=s||u;if("lego"===m)return r.a.createElement(p,{dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:i,saveButtonRef:v,showSaveButton:c,title:_});const y=l()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":b},"PinBetterSave_Button--repin-flow"),w=l()("PinBetterSave__Button",{"PinBetterSave__Button--rtl":b,"PinBetterSave__Button--lego-pin":"pin"===f},"PinBetterSave__Button--lego");return r.a.createElement(h,{dropdownClasses:l()("PinBetterSave__Dropdown","PinBetterSave__Dropdown--lego",{"PinBetterSave__Dropdown--rtl":b,"PinBetterSave__Dropdown--lego-pin":"pin"===f,"PinBetterSave__Dropdown--lego-closeup":"closeup"===f,"PinBetterSave__Dropdown--expandedLego":!c}),dropdownRef:t,onBoardDropdownClick:n,onSaveClick:a,renderPinSaveTooltip:i,saveButtonClasses:g?y:w,saveButtonRef:v,showSaveButton:c,textColor:s?"darkGray":"gray",title:_,hideDropdown:g})}var f=n("clxp"),g=n("1inl"),b=n("ajUs"),v=n("a49R");class _ extends r.a.Component{constructor(...e){var t,n,o;super(...e),o=()=>{const{setActive:e,showOnTopOfModal:t,...n}=this.props;e("flyout",n,t||!1)},(n="renderFlyout")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){this.renderFlyout()}componentDidUpdate(){this.renderFlyout()}componentWillUnmount(){this.props.setActive()}render(){return null}}const y=e=>r.a.createElement(v.a.Consumer,null,t=>r.a.createElement(_,Object.assign({},e,{setActive:t})));y.displayName="MasonryFlyout";var w=y,S=n("qD10"),E=n("eOdZ"),B=n("lm6u");function C(e){const{action:t,additionalCreateFields:n,boardWithSection:a,children:i,onClose:s,pin:l,setCompletionPromise:c,showModal:d}=e,u=((e,t)=>{const[n,r]=Object(o.useState)([]);return Object(o.useEffect)(()=>{let n=!1;return e&&E.a.create("SectionRecommendationsResource",{pinIds:[t]}).callGet().then(e=>{var t;if(n)return;const o=null==e||null===(t=e.resource_response)||void 0===t?void 0:t.data;r(o.length>0&&o[0]||[])}),()=>{n=!0}},[e,t]),n})(d,l.id);return r.a.createElement(B.a,{additionalCreateFields:n,boardWithSection:a,action:t,hideSuccessAnimation:!!u.length,onClose:s,setCompletionPromise:c,showCreate:!0,shouldShowToast:!u.length,pin:l},e=>i({...e,sectionSuggestions:u}))}var I=n("uyxo"),x=n("v/Q4"),O=n("e3KR"),R=n("Wrea"),k=n("0zyx"),T=n("TN0d"),D=n("vvax"),j=n("EuRG"),P=n("H/Lk"),L=n("WnNx"),A=n("U4JR"),M=n("NjDU"),F=n("QAzJ"),N=n("CvCA"),H=n("e0nq");class z extends r.a.PureComponent{constructor(...e){var t,n,o;super(...e),o=()=>{const{boardId:e}=this.props;Object(A.b)(101,{component:20,element:10805,objectId:e})},(n="handleClick")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){const{toastShown:e}=this.props;e()}render(){const{boardName:e,boardUrl:t,onHide:n}=this.props;return r.a.createElement(N.a,{duration:5e3,onHide:n,text:Object(D.b)(c.a._("Find more ideas for {{ boardName }}"),{boardName:e}).join(""),href:t+"more_ideas/?ideas_referrer=16",onClick:this.handleClick})}}var W=Object(a.connect)(null,(e,t)=>({toastShown:()=>e(Object(H.c)(t.boardId))}))(z),U=n("w70y"),q=n("ZdPf"),G=n("B6Tf"),V=n("seP0"),Y=n("nGHF"),$=n("0nTG"),Z=n("EC67");function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X({savedInfo:e,variant:t}){const n="closeup"===t,o=n?"sm":"md";return r.a.createElement(S.a,{className:"underlineLink",stopPropagation:!0,style:{color:"#333"},to:e.url||""},r.a.createElement(u.e,{marginStart:n?1:0},r.a.createElement(u.V,{color:"darkGray",inline:!0,size:o},Object(D.b)(c.a._("Saved to {{ destination }}","Saved to label for better save","Saved to label for better save"),{destination:r.a.createElement(u.V,{color:"darkGray",key:"pin_auto_save_link",size:o,truncate:!0,weight:"bold",inline:!0},e.title)}))))}class K extends r.a.Component{constructor(...e){var t;super(...e),t=this,Q(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),Q(this,"setBoardSaveCompletionPromise",e=>{const{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;const{board:{id:n,name:o,url:r}}=e,a={boardId:n,title:o,url:r};this.updateSelectedBoardOrSection(a),this.updateSavedState({...a,localPinId:e.id}),t&&Object(q.d)(t.sensitivity)&&Object(q.c)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notice||t.sensitivity.notices[0]}):this.handleRepinHide()})}),Q(this,"updateSavedState",e=>{const{reduxLocation:t,save:n,searchQueryInvalidated:o,onSave:r,pin:{id:a}}=this.props,i=t.query&&t.query.q||Object(k.a)(t.history);n({pinId:a,...e}),i&&o(i),r&&r()}),Q(this,"updateSelectedBoardOrSection",e=>{const{selectBoardOrSection:t,pin:{id:n}}=this.props;t({pinId:n,...e})}),Q(this,"updateSelectedItem",()=>{const{initialSelection:e,selectedItem:t}=this.props;!t&&e&&this.updateSelectedBoardOrSection(e)}),Q(this,"dropdownRef",r.a.createRef()),Q(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save(e)}),Q(this,"handleBoardCreate",Object(i.a)(({title:e=""}={})=>{this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));const{onToggleFlyout:t}=this.props;t&&t(!0,!0)})),Q(this,"handleBoardCreated",e=>{this.setState({createdBoard:e})}),Q(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));const{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),Q(this,"handleBoardDropdownClick",e=>{const{pin:{id:t},viewParameter:n,location:{pathname:o},boardPickerStopwatch:r}=this.props;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(Object(A.b)(101,{component:13282,element:10960,viewParameter:n,objectId:t}),r&&(r.start(),Object(V.b)(r,o)),this.showFlyout())}),Q(this,"handleSaveClick",(async function(e){const{selectedItem:n}=t.props;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(A.b)(101,{component:13282,element:36,objectId:n.boardId,grid_index:4}),await t.save(n)):t.handleBoardDropdownClick(e)})),Q(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),Q(this,"handleEditSubmit",({boardId:e,sectionId:t,url:n,title:o})=>{const{pin:{id:r},savedInfo:{localPinId:a}={}}=this.props;this.updateSavedState({pinId:r,localPinId:a,boardId:e,sectionId:t||"",url:n,title:o})}),Q(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),Q(this,"deleteSavedState",()=>{const{unsave:e,onDelete:t,pin:{id:n}}=this.props;e({pinId:n}),t&&t()}),Q(this,"save",(async function(e){const{isLimitedLogin:n,mostRecentBoard:o,pin:{id:a},postRepinMoreIdeasUpsell:i,postRepinUpsellDisabled:s,save:l,setMostRecentBoard:c,showRepinAnimation:d,toastManagerContext:u}=t.props;t.updateSavedState(e);try{const{resource_response:{data:n}}=await t.getPinResource(e).callCreate({showError:!1}),h=e.url,{incrementBoardPinCount:p,updateUserPinCount:m,viewerUserId:f}=t.props;!s&&h&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:n})=>{if(!t)return!1;const{recentSaves:o,recentUpsell:r}=n;if(r[e])return!1;const a=o.findIndex(t=>t.boardId!==e);return(-1===a?o.length:a)+1>=3})({boardId:e.boardId,boardUrl:h,postRepinMoreIdeasUpsell:i})&&u.showToast(({onHide:t})=>r.a.createElement(W,{boardId:e.boardId,boardName:e.title,boardUrl:h,onHide:t})),l({pinId:a,...{...e,localPinId:n.id}}),T.b.publish("currentUser","pinCreated",n),T.b.publish(n.board.id,"pinCreated",{pin:n}),p({boardId:e.boardId,sectionId:e.sectionId}),m(f),d(a),o&&e.boardId!==o.id&&c(e.boardId,e.title,e.url)}catch(h){n||g.a.showError(h.message_detail||h.message),t.resetPinSavedState()}})),Q(this,"hideFlyout",(e=!1)=>{const{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){const{onMount:e}=this.props;this.updateSelectedItem(),e&&e()}componentDidUpdate(){this.updateSelectedItem()}getPinResource(e){const{carouselData:t,location:n,previousHistory:o,pin:r}=this.props,a=t&&t.index,i=Object(b.a)(r,n,o)||r.tracking_params+"~0",s={description:r.description||"",link:r.link,title:r.title||"",clientTrackingParams:i,board_id:e.boardId||"",pin_id:r.id||"",image_base64:r.image_base64,is_buyable_pin:!1,is_removable:r.promoted_is_removable,carousel_slot_index:a||0,...e.sectionId?{section:e.sectionId}:{},...Object($.f)(r)||{}};return E.a.create("RepinResource",s)}showFlyout(){const{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}render(){const{boardResource:e,carouselData:t,onToggleModal:n,pin:o,renderPinSaveTooltip:a,renderSavedStatus:i,requestContext:s,savedInfo:l,selectedItem:c,unselectedText:d,useMasonryFlyout:h,variant:p,viewParameter:g,isInWebRepinFlowExp:b,hideDropdown:v}=this.props,{boardWithSection:_,showBoardFlyout:y,showRepinModal:S,sensitiveContentNotice:E,suggestedBoardTitle:B}=this.state,x=["employees","enabled"].includes(s.experiments.v2ActivateExperiment("web_pinbettersave_legofication")),R=h?w:u.q,k=r.a.createElement(O.a,{boardResource:e,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:o});return r.a.createElement(f.a,{name:"PinBetterSave"},r.a.createElement(u.e,{width:"100%",display:"closeup"===p?"flex":void 0,height:x?48:"closeup"===p?44:void 0,color:x||"closeup"!==p?void 0:"lightGray",rounding:x||"closeup"!==p?void 0:4},(null==l?void 0:l.title)?r.a.createElement(I.a,{currentCarouselIndex:t&&t.index,onDeleteSavedState:this.deleteSavedState,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:l.localPinId,variant:p,viewParameter:g},i&&l&&i({savedInfo:l,variant:p})):r.a.createElement(m,{dropdownRef:this.dropdownRef,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:this.handleSaveClick,renderPinSaveTooltip:a,selectedTitle:c&&c.title,showSaveButton:!y,unselectedText:d,view:p,variant:x?"lego":"default",hideDropdown:v}),r.a.createElement(C,{additionalCreateFields:{is_stl_pin:Object($.i)(o)},boardWithSection:_,action:"create",onClose:this.handleRepinHide,setCompletionPromise:this.setBoardSaveCompletionPromise,showModal:S,pin:o},({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:n,handleAbort:o,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:i,handleSaveToBoard:s,newPin:l,updateDescription:c,modalTitle:d,sectionSuggestions:u,setModalTitle:h,pin:p})=>r.a.createElement(G.b,{boardSavedTo:e,isInModal:!0,displaySuccessAnimation:n,dismissModal:t,handleAbort:o,handleNewBoardAnimationCompletion:a,handleSocialConnectSet:i,handleSaveToBoard:s,updateDescription:c,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:E,pin:p,pwtAuxData:{pin_create_method:"repin"},sectionSuggestions:u,suggestedBoardTitle:B,boardWithSection:_,shouldRenderContent:S,newPin:l,modalTitle:d,setModalTitle:h,showCreate:!0})),y&&"closeup"===p&&r.a.createElement(u.q,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,size:b?"xl":"lg"},k),y&&"pin"===p&&r.a.createElement(R,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!h,size:b?"xl":"lg"},k)))}}Q(K,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>r.a.createElement(X,{savedInfo:e,variant:t})});t.default=r.a.memo((function(e){var t;const{pin:{id:n}}=e,o=Object(U.a)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),i=Object(U.a)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}),s=Object(Z.g)(),l=Object(Z.h)(),h=Object(d.d)(),p=Object(Y.b)(),m=Object(V.c)(),f=Object(x.a)(),g=Object(a.useDispatch)(),{anyEnabled:b}=Object(F.a)("web_repin_flow"),v=Object(a.useSelector)(({mostRecentBoard:e})=>e),_=Object(a.useSelector)(({pins:e})=>e[n]),y=Object(a.useSelector)(({history:e})=>e.previous),w=Object(a.useSelector)(({location:e})=>e),S=Object(a.useSelector)(({ui:e})=>e.postRepinMoreIdeasUpsell);let E=e.initialSelection,B=(null===(t=E)||void 0===t?void 0:t.title)||"",C=!0;if(!E){const e=i&&i.data&&i.data[0];E=i&&i.isLoaded&&e&&{boardId:e.id,title:e.name,url:e.url}||i&&i.isLoaded&&!e&&v&&{boardId:v.id,title:v.name,url:v.url}||void 0,B=i&&i.isLoaded?c.a._("Select","BetterSave label to pick a board from the list","BetterSave label to pick a board from the list"):"...",C=!1}return r.a.createElement(u.e,{overflow:"hidden"},r.a.createElement(K,Object.assign({},e,{boardResource:o,boardPickerStopwatch:m,carouselData:_&&_.carousel_data,history:s,incrementBoardPinCount:({boardId:e,sectionId:t})=>g(Object(R.d)({boardId:e,sectionId:t,increment:1})),initialSelection:E,isLimitedLogin:f.isLimitedLogin,location:l,mostRecentBoard:v,postRepinMoreIdeasUpsell:S,postRepinUpsellDisabled:C,previousHistory:y,reduxLocation:w,requestContext:h,save:e=>g(Object(H.a)(e)),savedInfo:_&&_.savedInfo,searchQueryInvalidated:e=>g(Object(j.b)(e)),selectBoardOrSection:e=>g(Object(H.b)(e)),selectedItem:_&&_.selectedItem,setMostRecentBoard:(e,t,n)=>g(Object(P.a)(e,t,n)),showRepinAnimation:e=>g(Object(L.b)(e)),toastManagerContext:p,unsave:e=>g(Object(H.d)(e)),unselectedText:B,updateUserPinCount:e=>g(Object(M.b)({userId:e,increment:1})),viewerUserId:f.isAuth?f.id:"",isInWebRepinFlowExp:b})))}))},gg0E:function(e,t,n){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var o=n("q1tI"),r=n("SyXB"),a=n("0YPa"),i=n("bNC6"),s=n("HMdf"),l=n("3/Bf"),c=n("y2Ga"),d=n("bZU8");const u=(e,t)=>{const n=(e=>e instanceof HTMLDivElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null)(e);if(!n)return Object(l.b)("missing_client_rect"),!1;return!(e instanceof HTMLImageElement&&n.width<100&&n.height<100)&&(({top:e,height:t},{foldY:n,pageYOffset:o})=>{const r=e+o;if(r>=n)return!1;const a=Math.min(t,n-r);return a>.5*t||a>.2*n})(n,t)},h=()=>{const e=(()=>{if(!document.querySelector)return Object(l.b)("missing_document_query_selector"),null;const e=document.querySelectorAll(d.d);return e[e.length-1]||null})();if(!e)return!1;const t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},p=e=>{if(!document.querySelector)return Object(l.b)("missing_document_query_selector"),[];const t={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},n=[d.b,...e?[d.a]:[]].join(",");return[...document.querySelectorAll(n)].reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement)&&u(n,t)){const t=(e=>{if(e instanceof HTMLImageElement)return e.src;const t=((e.style||{}).backgroundImage||"").match(/^url\(["'](http.*)["']\)$/);return t&&t[1]||null})(n);if(t)return e.concat([{htmlElement:n,url:t}])}return e},[])};var m=n("LrH5");const f=Object(m.a)("GridProfiler"),g=()=>!!(window.addEventListener&&window.removeEventListener&&"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&document.querySelector&&document.querySelectorAll),b=(e,t)=>{if(!t){const t=document.querySelector?document.querySelectorAll(d.d).length:(Object(l.b)("missing_document_query_selector"),0);if(t===e)return f("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!h())return f("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}};function v({isAtEndOfFeed:e,includeBackgroundImages:t}){const n=Object(c.c)(),d=null==n?void 0:n.id,u=null==n?void 0:n.setVisuallyCompleteResult,[h,g]=Object(o.useState)({status:"DISABLED"});Object(o.useEffect)(()=>{g(u?{status:"LAYOUT",failedCount:0,numOfItemsChecked:0}:{status:"DISABLED"})},[d,u]),Object(o.useEffect)(()=>{if("DISABLED"!==h.status&&Object(r.c)("GridVisuallyCompleteProfiler_"+h.status),f("new status",h),"LAYOUT"===h.status){const e=((e,t)=>{const n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)})("scroll",()=>{Object(r.c)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[h.status]),Object(a.a)(()=>{if(!n||!u)return;const{abort:o,metricId:r}=n;switch(h.status){case"LAYOUT":{const n=b(h.numOfItemsChecked,e);n.complete?g({status:"TIMING",failedCount:0,images:p(t).map(({htmlElement:e,url:t})=>({fileName:(t||"").replace(/.*\//,""),element:e}),[])}):500*h.failedCount>6e4?(Object(l.c)(`images.${Object(i.b)(r)}.visuallyComplete.maxLayoutAttempt`),o("visuallyComplete_layoutTimeout"),g({status:"DISABLED"})):g({...h,failedCount:h.failedCount+1,numOfItemsChecked:n.numOfItemsChecked});break}case"TIMING":{const e=Object(s.c)(),t=h.images.length,n=[];let a=0,c=0,d=0;h.images.forEach(({element:t,fileName:o})=>{const r=e.find(e=>("img"===e.initiatorType||"css"===e.initiatorType)&&e.name.endsWith(o));r?r.responseEnd?(n.push(r),Object(m.b)(t,"green")):(d+=1,Object(m.b)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(c+=1,Object(m.b)(t,"red")):(a+=1,Object(m.b)(t,"greenyellow"))}),a||d?100*h.failedCount>6e4?(Object(l.c)(`images.${Object(i.b)(r)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:t,incompleteCount:a,noTimingCount:c,noTimingResponseEndCount:d}}),o("visuallyComplete_timingTimeout"),g({status:"DISABLED"})):g({...h,failedCount:h.failedCount+1}):(f(`All ${n.length} images are fetched`),u({imageTimings:n}),g({status:"DISABLED"}),Object(l.c)(`images.${Object(i.b)(r)}.visuallyComplete.complete`,{tags:{totalImageCount:t,noTimingCount:c}}));break}}},(e=>("LAYOUT"===e.status?500:"TIMING"===e.status&&100)||null)(h))}},jZhD:function(e,t,n){n.d(t,"a",(function(){return i}));var o=n("q1tI"),r=(n("17x9"),n("pdBG"));function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class i extends o.Component{constructor(...e){super(...e),a(this,"searchCache",Object.create(null)),a(this,"lastSearchedQuery",null),a(this,"search",e=>{this.lastSearchedQuery=e,e in this.searchCache?this.props.onTypeaheadSuggestionsChange(this.searchCache[e],e):this.provider.search(e,({items:t})=>{this.searchCache[e]=t,e===this.lastSearchedQuery&&this.props.onTypeaheadSuggestionsChange(t,e)})})}componentDidMount(){const e=this.props.resourceOptions||{};this.provider=new r.a({resource_name:this.props.resourceName,...e});const{value:t}=this.props;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}componentDidUpdate(e){const{value:t}=this.props;null!=t&&t!==e.value&&this.search(t)}render(){return this.props.children||null}}a(i,"defaultProps",{resourceName:"TypeaheadResource"})},l9OW:function(e,t,n){var o=n("SKAX"),r=n("MMmD");e.exports=function(e,t){var n=-1,a=r(e)?Array(e.length):[];return o(e,(function(e,o,r){a[++n]=t(e,o,r)})),a}},"lm/5":function(e,t,n){var o=n("fmRc"),r=n("wF/u");e.exports=function(e,t,n,a){var i=n.length,s=i,l=!a;if(null==e)return!s;for(e=Object(e);i--;){var c=n[i];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<s;){var d=(c=n[i])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var p=new o;if(a)var m=a(u,h,d,e,t,p);if(!(void 0===m?r(h,u,3,a,p):m))return!1}}return!0}},"mVx/":function(e,t,n){var o=n("XKAG")(n("JELi"));e.exports=o},pdBG:function(e,t,n){var o=n("AHhP"),r=n.n(o);const a=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},i=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};i.prototype.set=function(e,t){let n=this._uidToData[e];n||(n=new a(e,t),this._uidToData[e]=n,this._numItems+=1),this._moveToFront(n),this._numItems>this._maxNumItems&&this._evict()},i.prototype.get=function(e){const t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},i.prototype.remove=function(e){const t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},i.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},i.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};var s=i,l=n("eOdZ"),c=n("mBfy");const d=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;const t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope),e.suggestion_type&&(t.suggestion_type=e.suggestion_type);let o="TypeaheadResource";e.resource_name&&(o=e.resource_name),this.searchResource=l.a.create(o,t),this.itemsCache=new s};Object.assign(d.prototype,r.a),Object.assign(d.prototype,{search(e,t){let n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&c.default.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&c.default&&c.default.isAuthenticated())n="recent_search";else{const n=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(n){const o=n.items;if(o&&o.length){this.abortSearch();const r=n.hint;return void this.publishData(e,o,r,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource(){return this.searchResource},abortSearch(){this.getResource().abort()},publishData(e,t,n,o){const r={term:e,items:t,hint:n};this.trigger("data",r),o&&o(r)},setAutocompleteScope(e){this.getResource().set("autocompleteScope",e)},fetch(e,t,n){const o=this.getResource();if(o.isCalling()){const t=o.get("term");if(e===t)return;this.abortSearch()}""!==this.tags&&(o.set("term",e),o.set("tags",t||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(t=>{const o=t.resource_response.data,r=o.items,a=o.hint||{},i={hint:a,items:r};this.cacheData(e,i),this.publishData(e,r,a,n)},e=>{this.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm(e){this.itemsCache.remove(e)},cacheData(e,t){this.itemsCache.set(e,t)},prefetch(){if(this.warm)return;l.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0}});t.a=d},s7xj:function(e,t,n){n.d(t,"a",(function(){return h}));var o=n("q1tI"),r=n.n(o),a=n("8Mj5"),i=n("xweI"),s=n.n(i),l=n("v/Q4"),c=n("QKYm");function d(e,t,n){const{collaborated_by_me:o,collaborating_users:r=[],owner:a}=e,i=[a];if(o||n){const e=r.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){const t=r.splice(e,1)[0];i.push(t)}else i.push(t)}const l=c.a-i.length,d=s()(r,"full_name").slice(0,l);return[...i,...d]}function u(e){var t,n;return{href:"/"+e.username,key:e.id,name:null!==(t=e.fullName)&&void 0!==t?t:e.full_name,src:null!==(n=e.imageMediumUrl)&&void 0!==n?n:e.image_medium_url}}function h({board:e,forceViewer:t,isCompact:n,ownerOnly:o}){const i=Object(l.a)();return r.a.createElement(a.a,{faces:o?[u(e.owner)]:d(e,i,t).map(u),faceSize:n?"xs":"sm",overlap:n?-3:-4})}},"ut/Y":function(e,t,n){var o=n("ZCpW"),r=n("GDhZ"),a=n("zZ0H"),i=n("Z0cm"),s=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?r(e[0],e[1]):o(e):s(e)}},uyxo:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),r=n.n(o),a=n("jHGc"),i=n("n6mq");function s(e){const{children:t,currentCarouselIndex:n,onDeleteSavedState:o,onEditSubmit:s,onToggleModal:l,pinId:c,variant:d,viewParameter:u}=e,h="pin"===d?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"};return r.a.createElement(i.e,{display:"flex",direction:"row",alignItems:"center",width:"closeup"===d?"100%":void 0,paddingX:"closeup"===d?2:void 0,marginStart:"pin"===d?-1:void 0,marginEnd:"pin"===d?-1:void 0},t&&r.a.createElement(i.e,{paddingX:1,"data-test-id":"saved-info",flex:"grow"},t),r.a.createElement(i.e,{paddingX:1,flex:"none",marginStart:"auto"},r.a.createElement(a.default,{component:0,onDelete:o,onSubmit:s,pinId:c,onToggleModal:l,viewParameter:u,carouselSlotCurrentIndex:n,style:h,useLegoStyles:"pin"===d})))}},vzKb:function(e,t,n){t.a=(e,t,n)=>{if(window.PerformanceObserver)try{const o=new window.PerformanceObserver(t);o.observe(e),window.addEventListener("beforeunload",()=>{o.disconnect()}),n&&window.addEventListener("popstate",()=>{n()})}catch(o){}}},xweI:function(e,t,n){var o=n("XGnz"),r=n("alwl"),a=n("EA7m"),i=n("mv/X"),s=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),r(e,o(t,1),[])}));e.exports=s},y2Ga:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var o=n("1dBE");const{Consumer:r,Provider:a,useHook:i}=Object(o.b)("pwtSurfaceContext")},yue5:function(e,t,n){var o=n("/9aa");e.exports=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e==e,i=o(e),s=void 0!==t,l=null===t,c=t==t,d=o(t);if(!l&&!d&&!i&&e>t||i&&s&&c&&!l&&!d||r&&s&&c||!n&&c||!a)return 1;if(!r&&!i&&!d&&e<t||d&&n&&a&&!r&&!i||l&&n&&a||!s&&a||!c)return-1}return 0}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/PinBetterSaveCommon-43219ec9ddca639917d5.mjs.map